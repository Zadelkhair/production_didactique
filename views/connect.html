<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
        .form-container {
            border: 1px #d0d0d0 solid;
            position: absolute;
            transform: translate(-50%, -50%);
            left: 50%;
            top: 50%;
            padding: 10px;
            border-radius: 5px;
            width: 400px;
            box-shadow: 0 0 20px 0px #00000042;
        }
    </style>
</head>

<body>

    <div class="form-container">
        <form id="loginform" method="POST" action="/connect">
            <!-- username -->
            <div class="form-group mb-2">
                <label for="formGroupExampleInput2" class="mb-2">username :</label>
                <input type="text" name="username" class="form-control" placeholder="username">
                <div class="text-danger" style="display: none;" id="invalid_username">
                    Your username is incorrect!
                </div>
                <script>
                    var url = window.location.href;
                    if (url.includes('invalid_username')) {
                        document.getElementById('invalid_username').style.display = 'block';
                    }
                </script>
                <div class="text-success" style="display: none;" id="user_created">
                    The account is created with success!
                </div>
                <script>
                    var url = window.location.href;
                    if (url.includes('user_created')) {
                        document.getElementById('user_created').style.display = 'block';
                    }
                </script>

            </div>

            <!-- password -->
            <div class="form-group mb-2">
                <label for="formGroupExampleInput2" class="mb-2">password :</label>
                <input type="password" name="password" class="form-control" placeholder="***********">
                <div class="text-danger" style="display: none;" id="invalid_password">
                    The password is incorrect!
                </div>
                <script>
                    var url = window.location.href;
                    if (url.includes('invalid_password')) {
                        document.getElementById('invalid_password').style.display = 'block';
                    }
                </script>
            </div>

            <!-- group -->
            <div class="form-group mb-2">
                <label for="formGroupExampleInput2" class="mb-2">group :</label>
                <input type="text" name="group" class="form-control" placeholder="G1, G2 ...">
                <div class="text-danger" style="display: none;" id="not_valid_group">
                    The group is incorrect!
                </div>
                <script>
                    let url = window.location.href;
                    if (url.includes('not_valid_group')) {
                        document.getElementById('not_valid_group').style.display = 'block';
                    }
                </script>
            </div>

            <button type="submit" class="btn btn-primary w-100">connect</button>
            <div class="text-danger" style="display: none;" id="somthing_wrong">
                Somthing wrong
            </div>
            <script>
                var url = window.location.href;
                if (url.includes('somthing_wrong')) {
                    document.getElementById('somthing_wrong').style.display = 'block';
                }
            </script>
        </form>
    </div>

    <script>
        // get loginform by id
        var loginform = document.getElementById('loginform');

        // check if url has room parameter
        var url = window.location.href;
        if (url.includes('room')) {
            // get room parameter
            var room = url.split('room=')[1];
            // set room parameter in loginform
            loginform.action = '/connect?room=' + room;
            
        }
    </script>

</body>

</html>